<img src="/static/images/background2.png" class="img-poem">
<div class="container">
  <div class="row">
    <div class="col s6 offset-s12">
  <form action="/delete/" method="POST">
    <input type="hidden" name="id" value="{{id}}">
  <button class="waves-effect waves-blue-grey btn flat deep-orange lighten-3" id="d"><i class="large material-icons"> delete </i> Delete </button>
</form>
</div>
</div>
  <div>
    <div class="col s12 center">
      <div id="poemShow" class="print">
        <h2 class="blue-grey-text lighten-3">{{name}}</h2>
        <h5 class="blue-grey-text">  {{#each poem}}
         {{this}} <br>
          {{/each}}
        </h5>
        <!-- <button class="waves-effect waves-yellow deep-orange lighten-3 btn"><i class="material-icons left">print</i>Print</a> -->
      </div>

      <div id="poemEdit" style="display:none" class="print">
        <form action="/update_poem/" method="POST">
          <input name="lines" id="lines" value="{{poem.length}}" type="hidden">
          <h2><textarea class="textarea1 blue-grey-text lighten-3" name="updateTitle" value="{{name}}" style="height: 1.3em;">{{name}}</textarea></h2>
          <h5 class="blue-grey-text">{{#each poem}}
                <textarea class="textarea2" name="line{{@index}}" value="{{this}}"> {{this}} </textarea><br>
              {{/each}}
              <div id="newPoemLine">
              </div>
              <button class="btn green lighten-3" type="submit"><i class="Medium material-icons">save</i>Save</button>
          </h5>
          <input type="hidden" name="id" value="{{id}}">
        </form>
        <button class="btn blue-grey lighten-3" onclick="newPoemLine()"><i class="Medium material-icons">add</i>New Line</button>
      </div>

        <br>
      <div class="row">
        <button class="waves-effect waves-blue-grey btn flat green lighten-3" id="e" value="{{id}}"><i class="large material-icons"> edit </i> Edit </button>
        <button class="waves-effect waves-blue-grey deep-orange lighten-3 btn" onclick="window.print(); return false;"><i class="material-icons left">print</i>Print</a>
        <br><br>
      </div>
    </div>
  </div>
</div>

<script>

function newPoemLine() {
  var i = parseInt(document.getElementById('lines').value);
  console.log(i);

  //var lines gets the value of lines from the html and updates the value every time a line is added
  // var lines = document.getElementById('lines').value = i;
  $("#newPoemLine").append($(`<textarea class="textarea2" name="line${i}"></textarea><br>`));
  i++;
  document.getElementById('lines').value = i;
}
</script>
